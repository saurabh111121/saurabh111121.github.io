<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Book recommendations and reading resources - A collection curated by Saurabh Kala">
  <meta name="keywords" content="books, reading, recommendations, programming books, technology books">
  <meta name="author" content="Saurabh Kala">
  
  <title>Books - Saurabh Kala</title>

  <!-- Favicons -->
  <link rel="apple-touch-icon" href="assets/img/apple-touch-icon.png">
  <link rel="icon" href="assets/img/favicon.png">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="src/bootstrap/bootstrap-4.5.3-dist/css/bootstrap.min.css">
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="assets/css/style.css">

  <!-- Font Awesome -->
  <script src="https://use.fontawesome.com/10b1426743.js"></script>

  <style>
    /* Custom styles for books page */
    .book-item {
      margin-bottom: 30px;
      border-radius: 5px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      height: 100%;
    }
    
    .book-item:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(0,0,0,0.2);
    }
    
    .book-cover {
      height: 180px;
      overflow: hidden;
      position: relative;
    }
    
    .book-cover img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: all 0.5s ease;
    }
    
    .book-item:hover .book-cover img {
      transform: scale(1.1);
    }
    
    .book-info {
      padding: 15px;
      background-color: #fff;
      height: calc(100% - 180px);
      display: flex;
      flex-direction: column;
    }
    
    .book-info h4 {
      margin-bottom: 10px;
      font-size: 18px;
      font-weight: 700;
    }
    
    .book-info .author {
      color: #777;
      font-style: italic;
      margin-bottom: 10px;
    }
    
    .book-info .description {
      flex-grow: 1;
      margin-bottom: 15px;
      font-size: 14px;
      line-height: 1.5;
    }
    
    .book-links {
      display: flex;
      justify-content: space-between;
    }
    
    .book-links a {
      display: inline-block;
      padding: 8px 15px;
      border-radius: 4px;
      text-decoration: none;
      transition: all 0.3s;
    }
    
    .preview-btn {
      background-color: #f1f6fe;
      color: #106eea;
    }
    
    .preview-btn:hover {
      background-color: #e1eeff;
      color: #0b5ac2;
      text-decoration: none;
    }
    
    .buy-btn {
      background-color: #106eea;
      color: #fff;
    }
    
    .buy-btn:hover {
      background-color: #0b5ac2;
      color: #fff;
      text-decoration: none;
    }
    
    .category-filter {
      margin-bottom: 30px;
    }
    
    .category-filter ul {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin: 0;
      padding: 0;
      list-style: none;
    }
    
    .category-filter li {
      margin: 5px;
      cursor: pointer;
      padding: 8px 16px;
      border-radius: 50px;
      background: #f1f6fe;
      transition: all 0.3s ease;
    }
    
    .category-filter li:hover,
    .category-filter li.filter-active {
      background: #106eea;
      color: white;
    }
    
    .book-rating {
      color: #ffc107;
      margin-bottom: 10px;
    }
    
    /* Book preview modal */
    .book-preview-modal .modal-content {
      border: none;
      border-radius: 5px;
      overflow: hidden;
    }
    
    .book-preview-modal .modal-header {
      background-color: #106eea;
      color: #fff;
      border-bottom: none;
    }
    
    .book-preview-modal .modal-body {
      padding: 20px;
    }
    
    .modal-close {
      color: #fff;
      font-size: 24px;
      cursor: pointer;
      position: absolute;
      right: 20px;
    }
    
    .book-preview-content {
      display: flex;
      flex-direction: column;
    }
    
    .book-preview-image {
      max-width: 200px;
      margin: 0 auto 20px auto;
    }
    
    @media (min-width: 768px) {
      .book-preview-content {
        flex-direction: row;
      }
      
      .book-preview-image {
        margin: 0 20px 0 0;
      }
    }
    
    .book-preview-info {
      flex: 1;
    }
    
    .book-preview-actions {
      text-align: center;
      margin-top: 20px;
    }
    
    /* Lazy-load image placeholder */
    .lazy-load-placeholder {
      background-color: #f1f1f1;
      width: 100%;
      height: 100%;
    }

    /* Book category badges */
    .book-category {
      display: inline-block;
      padding: 4px 8px;
      margin-right: 5px;
      margin-bottom: 10px;
      background-color: #f1f6fe;
      color: #106eea;
      border-radius: 4px;
      font-size: 12px;
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header id="header" class="fixed-top">
    <div class="container d-flex align-items-center justify-content-between">
      <h1 class="logo"><a href="index.html">Saurabh<span>Kala</span></a></h1>

      <nav class="nav-menu d-none d-lg-block">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="index.html#about">About</a></li>
          <li><a href="index.html#skills">Skills</a></li>
          <li><a href="index.html#portfolio">Portfolio</a></li>
          <li><a href="game.html">Game</a></li>
          <li><a href="wallpapers.html">Wallpapers</a></li>
          <li class="active"><a href="books.html">Books</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>

      <!-- Mobile Navigation -->
      <nav class="mobile-nav d-lg-none">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="index.html#about">About</a></li>
          <li><a href="index.html#skills">Skills</a></li>
          <li><a href="index.html#portfolio">Portfolio</a></li>
          <li><a href="game.html">Game</a></li>
          <li><a href="wallpapers.html">Wallpapers</a></li>
          <li class="active"><a href="books.html">Books</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
      <button type="button" class="mobile-nav-toggle d-lg-none"><i class="fa fa-bars"></i></button>
    </div>
  </header>

  <main id="main">
    <!-- Breadcrumbs -->
    <section class="breadcrumbs">
      <div class="container">
        <div class="d-flex justify-content-between align-items-center">
          <h2>Book Recommendations</h2>
          <ol>
            <li><a href="index.html">Home</a></li>
            <li>Books</li>
          </ol>
        </div>
      </div>
    </section>

    <!-- Books Section -->
    <section class="books-section">
      <div class="container">
        <div class="section-title">
          <h2>Books</h2>
          <h3>Reading <span>Recommendations</span></h3>
          <p>A curated collection of books for developers and technology enthusiasts</p>
        </div>

    <div class="category-filter">
      <ul id="books-flters">
        <li data-filter="*" class="filter-active">All Categories</li>
        <!-- Categories will be dynamically loaded here -->
      </ul>
    </div>
    
    <!-- Search and navigation bar -->
    <div class="row mb-4">
      <div class="col-md-6 mb-3 mb-md-0">
        <div class="input-group">
          <input type="text" id="searchInput" class="form-control" placeholder="Search books...">
          <div class="input-group-append">
            <button class="btn btn-primary" type="button" id="searchButton">
              <i class="fa fa-search"></i> Search
            </button>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb" id="folderBreadcrumb">
            <li class="breadcrumb-item active" aria-current="page">Root</li>
          </ol>
        </nav>
      </div>
    </div>

        <div class="row book-container" id="bookContainer">
          <!-- Books will be dynamically loaded here -->
          <div class="col-12 text-center py-5" id="loading">
            <div class="spinner-border text-primary" role="status">
              <span class="sr-only">Loading...</span>
            </div>
            <p class="mt-2">Loading books...</p>
          </div>
        </div>

        <!-- Pagination controls -->
        <div class="row">
          <div class="col-12">
            <nav aria-label="Book pagination">
              <ul class="pagination justify-content-center" id="pagination">
                <!-- Pagination will be dynamically generated -->
              </ul>
            </nav>
          </div>
        </div>

        <!-- Reading List Tips Section -->
        <div class="reading-tips-section mt-5">
          <div class="card">
            <div class="card-body">
              <h3>Building Your Technical Reading List</h3>
              <p>Reading is one of the most effective ways to improve your skills and stay current in the rapidly evolving world of technology. Here are some tips for building an effective reading list:</p>
              
              <div class="row mt-4">
                <div class="col-md-6">
                  <h4><i class="fa fa-balance-scale text-primary"></i> Balance Theory and Practice</h4>
                  <p>Mix theoretical books that teach foundational concepts with practical guides that show you how to apply those concepts.</p>
                </div>
                <div class="col-md-6">
                  <h4><i class="fa fa-clock-o text-primary"></i> Stay Current and Timeless</h4>
                  <p>Balance books about current technologies with timeless classics that teach principles that don't change.</p>
                </div>
              </div>
              
              <div class="row mt-3">
                <div class="col-md-6">
                  <h4><i class="fa fa-arrows-alt text-primary"></i> Expand Your Horizons</h4>
                  <p>Don't just read about your specialty. Explore related fields to gain new perspectives and ideas.</p>
                </div>
                <div class="col-md-6">
                  <h4><i class="fa fa-users text-primary"></i> Join a Book Club</h4>
                  <p>Reading with others can help you stay motivated and gain different perspectives on the material.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

  <!-- We no longer need the modal since we're opening PDFs directly -->
  </main>

  <!-- Footer -->
  <footer id="footer">
    <div class="container py-4">
      <div class="copyright">
        &copy; <strong><span>Saurabh Kala</span></strong>. All Rights Reserved
      </div>
      <div class="credits">
        Portfolio Website
      </div>
    </div>
  </footer>

  <a href="#" class="back-to-top"><i class="fa fa-arrow-up"></i></a>

  <!-- jQuery first, then Bootstrap JS -->
  <script src="src/jquery/compressed production jQuery 3.5.1/jquery-3.5.1.min.js"></script>
  <script src="src/bootstrap/bootstrap-4.5.3-dist/js/bootstrap.min.js"></script>
  <script src="src/popper.js/popper.min.js"></script>

  <!-- Main JS -->
  <script src="assets/js/main.js"></script>
  
  <!-- PDF.js for thumbnail generation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
  <script>
    // Set the PDF.js worker path
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js';
  </script>

  <!-- Custom JS for Books Page -->
  <script>
    $(document).ready(function() {
      // Configuration
      const REPO_OWNER = 'saurabh111121';
      const REPO_NAME = 'Books';
      const ITEMS_PER_PAGE = 9;
      const GITHUB_API_URL = `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents`;
      const DEFAULT_BOOK_COVER = 'assets/img/portfolio/portfolio-1.jpg';
      
      // State variables
      let allItems = [];
      let currentPath = '';
      let currentPage = 1;
      let categories = new Set();
      let filteredItems = [];
      
      // Load repository contents
      loadRepositoryContents();
      
      // Search functionality
      $('#searchButton').click(function() {
        searchBooks();
      });
      
      $('#searchInput').keypress(function(e) {
        if (e.which === 13) {
          searchBooks();
        }
      });
      
      function searchBooks() {
        const searchTerm = $('#searchInput').val().toLowerCase().trim();
        
        if (searchTerm === '') {
          return;
        }
        
        $('#loading').show();
        
        // Search in all repositories (recursive function to fetch all contents)
        searchAllBooks(searchTerm);
      }
      
      function searchAllBooks(searchTerm, path = '') {
        // Show loading indicator
        $('#loading').show();
        
        // Fetch repository contents
        $.ajax({
          url: path ? `${GITHUB_API_URL}/${path}` : GITHUB_API_URL,
          method: 'GET',
          dataType: 'json',
          success: function(data) {
            // Process each item
            let searchResults = [];
            
            // Process data sequentially with promises
            const processPromises = data.map(item => {
              return new Promise((resolve) => {
                if (item.type === 'dir') {
                  // If it's a directory, recursively search inside
                  const newPath = path ? `${path}/${item.name}` : item.name;
                  // Fetch contents of this directory
                  $.ajax({
                    url: `${GITHUB_API_URL}/${newPath}`,
                    method: 'GET',
                    dataType: 'json',
                    success: function(subData) {
                      // Process each item in the subdirectory
                      const subResults = subData.filter(subItem => {
                        if (subItem.type === 'file' && 
                            subItem.name.toLowerCase().endsWith('.pdf') && 
                            subItem.name.toLowerCase().includes(searchTerm)) {
                          // Modify the item to include category data
                          subItem.category = item.name;
                          subItem.fullPath = `${newPath}/${subItem.name}`;
                          return true;
                        }
                        return false;
                      });
                      
                      // Add results
                      searchResults = searchResults.concat(subResults);
                      resolve();
                    },
                    error: function() {
                      resolve();
                    }
                  });
                } else if (item.type === 'file' && 
                           item.name.toLowerCase().endsWith('.pdf') && 
                           item.name.toLowerCase().includes(searchTerm)) {
                  // It's a matching PDF file
                  item.category = 'Others';
                  item.fullPath = path ? `${path}/${item.name}` : item.name;
                  searchResults.push(item);
                  resolve();
                } else {
                  resolve();
                }
              });
            });
            
            // When all processing is done
            Promise.all(processPromises).then(() => {
              // Update UI with search results
              updateSearchResults(searchResults);
              $('#loading').hide();
            });
          },
          error: function(error) {
            console.error('Search error:', error);
            $('#loading').hide();
            $('#bookContainer').html(`
              <div class="col-12">
                <div class="alert alert-danger">
                  Search failed. Please try again later.
                </div>
              </div>
            `);
          }
        });
      }
      
      function updateSearchResults(results) {
        const container = $('#bookContainer');
        container.empty();
        
        if (results.length === 0) {
          container.html(`
            <div class="col-12">
              <div class="alert alert-info">
                No books found matching your search. Please try a different search term.
              </div>
            </div>
          `);
          return;
        }
        
        // Display search results
        results.forEach(item => {
          container.append(createBookCard(item));
        });
        
        // Add animation effects
        $('.book-item').each(function(index) {
          $(this).css({
            'opacity': '0',
            'transform': 'translateY(20px)'
          });
          
          setTimeout(() => {
            $(this).animate({
              'opacity': '1',
              'transform': 'translateY(0)'
            }, 300);
          }, 100 * index);
        });
      }
      
      // Function to load repository contents
      function loadRepositoryContents(path = '') {
        $('#loading').show();
        currentPath = path;
        
        // Update breadcrumb navigation
        updateBreadcrumb(path);
        
        // Fetch repository contents from GitHub API
        $.ajax({
          url: path ? `${GITHUB_API_URL}/${path}` : GITHUB_API_URL,
          method: 'GET',
          dataType: 'json',
          success: function(data) {
            // If we're at the root and there's only one folder, navigate directly into it
            if (!path && data.length === 1 && data[0].type === 'dir') {
              loadRepositoryContents(data[0].name);
              return;
            }
            
            // Process the data
            processRepoContents(data);
          },
          error: function(error) {
            console.error('Error fetching repository contents:', error);
            $('#bookContainer').html(`
              <div class="col-12">
                <div class="alert alert-danger">
                  Failed to load books. Please try again later.
                </div>
              </div>
            `);
            $('#loading').hide();
          }
        });
      }
      
      // Process repository contents
      function processRepoContents(items) {
        allItems = items;
        
        // Extract categories (folders)
        categories = new Set();
        items.forEach(item => {
          if (item.type === 'dir') {
            categories.add(decodeURIComponent(item.name));
          }
        });
        
        // Update category filters
        updateCategoryFilters();
        
        // Check if the current folder has any subdirectories
        // If not, set view mode to show only PDFs
        checkForSubdirectories(items);
        
        // Filter and display items
        filterAndDisplayItems('*');
        
        $('#loading').hide();
      }
      
      // Check if a folder contains subdirectories
      function checkForSubdirectories(items) {
        // Check if there are any directories in the items
        const hasDirectories = items.some(item => item.type === 'dir');
        
        // If no directories, adjust the filter to show only PDFs
        if (!hasDirectories) {
          // Hide all folder filters except "All Categories"
          $('#books-flters li:not(:first-child)').hide();
        } else {
          $('#books-flters li').show();
        }
      }
      
      // Update breadcrumb navigation
      function updateBreadcrumb(path) {
        const breadcrumb = $('#folderBreadcrumb');
        breadcrumb.empty();
        
        // Add home/root link
        breadcrumb.append(`
          <li class="breadcrumb-item">
            <a href="#" data-path="">Root</a>
          </li>
        `);
        
        // Add path segments
        if (path) {
          const segments = path.split('/');
          let currentPath = '';
          
          segments.forEach((segment, index) => {
            currentPath += (index > 0 ? '/' : '') + segment;
            const isLast = index === segments.length - 1;
            
            breadcrumb.append(`
              <li class="breadcrumb-item ${isLast ? 'active' : ''}">
                ${isLast ? 
                  decodeURIComponent(segment) : 
                  `<a href="#" data-path="${currentPath}">${decodeURIComponent(segment)}</a>`
                }
              </li>
            `);
          });
        }
        
        // Add click handlers to breadcrumb links
        breadcrumb.find('a').click(function(e) {
          e.preventDefault();
          const path = $(this).data('path');
          loadRepositoryContents(path);
        });
      }
      
      // Update category filters
      function updateCategoryFilters() {
        const filtersContainer = $('#books-flters');
        
        // Keep the "All Categories" filter
        filtersContainer.find('li:not(:first-child)').remove();
        
        // Add category filters
        categories.forEach(category => {
          filtersContainer.append(`
            <li data-filter=".filter-${category.toLowerCase().replace(/[^a-z0-9]/g, '-')}">${category}</li>
          `);
        });
        
        // Add "Others" filter if there are files in the root
        const hasRootFiles = allItems.some(item => item.type === 'file' && item.name.toLowerCase().endsWith('.pdf'));
        if (hasRootFiles) {
          filtersContainer.append(`<li data-filter=".filter-others">Others</li>`);
        }
        
        // Add filter click functionality
        $('#books-flters li').on('click', function() {
          $("#books-flters li").removeClass('filter-active');
          $(this).addClass('filter-active');
          
          const filterValue = $(this).data('filter');
          filterAndDisplayItems(filterValue);
        });
      }
      
      // Filter and display items
      function filterAndDisplayItems(filterValue) {
        filteredItems = allItems.filter(item => {
          if (filterValue === '*') return true;
          
          const itemCategory = item.type === 'dir' ? 
            item.name.toLowerCase().replace(/[^a-z0-9]/g, '-') : 
            'others';
            
          return `.filter-${itemCategory}` === filterValue || 
                 (filterValue === '.filter-others' && item.type === 'file' && item.name.toLowerCase().endsWith('.pdf'));
        });
        
        // Reset pagination
        currentPage = 1;
        renderItems();
        renderPagination();
      }
      
      // Render items for the current page
      function renderItems() {
        const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;
        const endIndex = startIndex + ITEMS_PER_PAGE;
        const itemsToShow = filteredItems.slice(startIndex, endIndex);
        
        const container = $('#bookContainer');
        container.empty();
        
        if (itemsToShow.length === 0) {
          container.html(`
            <div class="col-12">
              <div class="alert alert-info">
                No books found. Try a different category or search term.
              </div>
            </div>
          `);
          return;
        }
        
        itemsToShow.forEach(item => {
          if (item.type === 'dir') {
            // It's a folder (category)
            container.append(createFolderCard(item));
          } else if (item.name.toLowerCase().endsWith('.pdf')) {
            // It's a PDF file (book)
            container.append(createBookCard(item));
          }
        });
        
        // Add animation effects
        $('.book-item').each(function(index) {
          $(this).css({
            'opacity': '0',
            'transform': 'translateY(20px)'
          });
          
          setTimeout(() => {
            $(this).animate({
              'opacity': '1',
              'transform': 'translateY(0)'
            }, 300);
          }, 100 * index);
        });
      }
      
      // Create a folder card
      function createFolderCard(folder) {
        const folderName = decodeURIComponent(folder.name);
        const folderPath = currentPath ? `${currentPath}/${folder.name}` : folder.name;
        const filterClass = `filter-${folderName.toLowerCase().replace(/[^a-z0-9]/g, '-')}`;
        
        return `
          <div class="col-md-4 col-lg-3 book-item ${filterClass}">
            <div class="book-wrap">
              <div class="book-cover" style="background-color: #f8f9fa; display: flex; align-items: center; justify-content: center;">
                <i class="fa fa-folder" style="font-size: 70px; color: #f0ad4e;"></i>
              </div>
              <div class="book-info">
                <h4>${folderName}</h4>
                <div class="book-category">Folder</div>
                <div class="book-links">
                  <a href="#" class="preview-btn folder-link" data-path="${folderPath}">Browse</a>
                </div>
              </div>
            </div>
          </div>
        `;
      }
      
      // Create a book card with PDF thumbnail
      function createBookCard(book) {
        const bookName = decodeURIComponent(book.name).replace('.pdf', '');
        const bookPath = book.path || (currentPath ? `${currentPath}/${book.name}` : book.name);
        const fullPath = book.fullPath || bookPath;
        const category = book.category || (currentPath ? currentPath.split('/')[0] : 'Others');
        const htmlUrl = book.html_url;
        const downloadUrl = book.download_url;
        const rawUrl = `https://raw.githubusercontent.com/${REPO_OWNER}/${REPO_NAME}/main/${fullPath}`;
        const cardId = `book-${Math.random().toString(36).substr(2, 9)}`; // Generate unique ID for the card
        
        // Create the card
        const bookCard = `
          <div id="${cardId}" class="col-md-4 col-lg-3 book-item filter-${category.toLowerCase().replace(/[^a-z0-9]/g, '-')}">
            <div class="book-wrap">
              <div class="book-cover" style="background-color: #f8f9fa; display: flex; align-items: center; justify-content: center;">
                <div class="thumbnail-container" style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
                  <i class="fa fa-file-pdf-o" style="font-size: 70px; color: #d9534f;"></i>
                  <div class="thumbnail-loading" style="position: absolute; font-size: 12px;">Loading thumbnail...</div>
                </div>
              </div>
              <div class="book-info">
                <h4>${bookName}</h4>
                <div class="book-category">${category}</div>
                <div class="text-center mt-2">
                  <a href="${rawUrl}" target="_blank" class="btn btn-sm btn-primary">
                    <i class="fa fa-eye"></i> Preview
                  </a>
                </div>
              </div>
            </div>
          </div>
        `;
        
        // Load the PDF thumbnail after the card is added to the DOM
        setTimeout(() => {
          loadPdfThumbnail(rawUrl, cardId);
        }, 100);
        
        return bookCard;
      }
      
      // Function to load PDF thumbnails
      function loadPdfThumbnail(pdfUrl, cardId) {
        // Get the container
        const thumbnailContainer = $(`#${cardId} .thumbnail-container`);
        
        // Load the PDF document
        const loadingTask = pdfjsLib.getDocument(pdfUrl);
        loadingTask.promise
          .then(function(pdf) {
            // Get the first page
            return pdf.getPage(1);
          })
          .then(function(page) {
            // Create a canvas element
            const canvas = document.createElement('canvas');
            thumbnailContainer.empty().append(canvas);
            
            // Set dimensions for the canvas
            const viewport = page.getViewport({ scale: 0.5 });
            canvas.width = viewport.width;
            canvas.height = viewport.height;
            
            // Prepare canvas for rendering
            const renderContext = {
              canvasContext: canvas.getContext('2d'),
              viewport: viewport
            };
            
            // Fit canvas to container
            canvas.style.width = '100%';
            canvas.style.height = '100%';
            canvas.style.objectFit = 'contain';
            
            // Render the page
            return page.render(renderContext).promise;
          })
          .catch(function(error) {
            console.error('Error loading PDF thumbnail:', error);
            // Keep the PDF icon if there's an error
            thumbnailContainer.find('.thumbnail-loading').hide();
          });
      }
      
      // Render pagination controls
      function renderPagination() {
        const totalPages = Math.ceil(filteredItems.length / ITEMS_PER_PAGE);
        const paginationContainer = $('#pagination');
        paginationContainer.empty();
        
        if (totalPages <= 1) {
          return;
        }
        
        // Previous button
        paginationContainer.append(`
          <li class="page-item ${currentPage === 1 ? 'disabled' : ''}">
            <a class="page-link" href="#" data-page="${currentPage - 1}" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>
        `);
        
        // Page numbers
        for (let i = 1; i <= totalPages; i++) {
          paginationContainer.append(`
            <li class="page-item ${i === currentPage ? 'active' : ''}">
              <a class="page-link" href="#" data-page="${i}">${i}</a>
            </li>
          `);
        }
        
        // Next button
        paginationContainer.append(`
          <li class="page-item ${currentPage === totalPages ? 'disabled' : ''}">
            <a class="page-link" href="#" data-page="${currentPage + 1}" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
        `);
        
        // Add click handler for pagination
        paginationContainer.find('.page-link').click(function(e) {
          e.preventDefault();
          const page = parseInt($(this).data('page'));
          
          if (page !== currentPage && page >= 1 && page <= totalPages) {
            currentPage = page;
            renderItems();
            renderPagination();
            
            // Scroll to top of book container
            $('html, body').animate({
              scrollTop: $('.book-container').offset().top - 100
            }, 500);
          }
        });
      }
      
      // Handle click events for folder links
      $(document).on('click', '.folder-link', function(e) {
        e.preventDefault();
        const path = $(this).data('path');
        loadRepositoryContents(path);
      });
      
      // We no longer need the modal handler since we're opening PDFs directly
    });
  </script>
</body>

</html>
